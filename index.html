<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Escolar</title>

<style>
body{margin:0;font-family:Arial;background:#eef3f7}
header{background:linear-gradient(90deg,#0d47a1,#1565c0,#1976d2);color:white;padding:15px;display:flex;align-items:center}
header img{height:70px;margin-right:15px}
nav{background:#0b3c8a;display:flex;flex-wrap:wrap;align-items:center}
nav button{background:none;border:none;color:white;padding:12px 15px;cursor:pointer;font-size:15px}
nav button:hover{background:#1565c0}
.admin-btn{margin-left:auto;background:#ff9800;border-radius:5px}
section{display:none;padding:20px;max-width:1100px;margin:auto}
.active{display:block}
h2{text-align:center;color:#0d47a1}
textarea,input,select{width:100%;padding:8px;margin:5px 0 10px}
textarea{min-height:100px}
button.salvar{background:#0d47a1;color:white;border:none;padding:10px;cursor:pointer;width:100%;border-radius:5px}
.box{background:white;padding:15px;margin-bottom:15px;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,0.1)}
.login-box{max-width:400px;margin:auto;background:white;padding:20px;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,0.2)}
img.questao-img{max-width:100%;margin:10px 0}
</style>
</head>

<body>

<header>
    <img src="LOGO_DA_ESCOLA.png">
    <h1>Portal Educacional</h1>
</header>

<nav>
    <button onclick="mostrar('inicio')">Início</button>
    <button onclick="mostrar('conteudos')">Conteúdos</button>
    <button onclick="mostrar('atividades')">Atividades</button>
    <button onclick="mostrar('simulados')">Simulados</button>
    <button onclick="mostrar('resultados')">Resultados</button>
    <button class="admin-btn" onclick="mostrar('loginAdmin')">Administrador</button>
</nav>

<section id="inicio" class="active">
    <h2>Bem-vindo ao Portal Escolar</h2>
</section>

<!-- CONTEÚDOS -->
<section id="conteudos">
    <h2>Conteúdos por Série</h2>
    <select id="serieConteudoFiltro" onchange="listarConteudos()">
        <option>6º Ano</option><option>7º Ano</option><option>8º Ano</option><option>9º Ano</option>
    </select>
    <div id="listaConteudos"></div>
</section>

<!-- ATIVIDADES -->
<section id="atividades">
    <h2>Atividades</h2>
    Nome do aluno:<input type="text" id="nomeAlunoAtiv">
    Série:<select id="serieAtividade"></select>
    Quantidade de questões:
    <select id="qtdAtividade">
        <option>10</option><option>20</option><option>50</option>
    </select>
    <div id="areaAtividade"></div>
    <button class="salvar" onclick="corrigirAtividade()">Finalizar Atividade</button>
</section>

<!-- SIMULADOS -->
<section id="simulados">
    <h2>Simulados</h2>
    Nome do aluno:<input type="text" id="nomeAlunoSim">
    Série:<select id="serieSimulado"></select>
    Quantidade de questões:
    <select id="qtdSimulado">
        <option>10</option><option>20</option><option>50</option>
    </select>
    <div id="areaSimulado"></div>
    <button class="salvar" onclick="corrigirSimulado()">Finalizar Simulado</button>
</section>

<!-- RESULTADOS -->
<section id="resultados">
    <h2>Resultados</h2>
    <div id="listaResultados"></div>
</section>

<!-- LOGIN -->
<section id="loginAdmin">
    <div class="login-box">
        <h2>Login Professor</h2>
        Senha:<input type="password" id="senhaAdmin">
        <button class="salvar" onclick="loginAdmin()">Entrar</button>
    </div>
</section>

<!-- ADMIN -->
<section id="admin">
    <h2>Painel do Professor</h2>
    <button onclick="mostrar('inicio')" style="background:red;color:white;padding:8px;border:none">Sair</button>

    <h3>Cadastrar Conteúdo</h3>
    Série:<select id="serieConteudo"></select>
    Título:<input type="text" id="tituloConteudo">
    Texto / Imagens / Gráficos (pode colar):<textarea id="textoConteudo"></textarea>
    <button class="salvar" onclick="salvarConteudo()">Salvar Conteúdo</button>

    <h3>Cadastrar Questão (Atividade/Simulado)</h3>
    Série:<select id="serieQuestao"></select>
    Pergunta (pode colar texto com imagem):<textarea id="pergunta"></textarea>
    URL da Imagem (opcional):<input type="text" id="imagem">
    A:<input type="text" id="a"> B:<input type="text" id="b">
    C:<input type="text" id="c"> D:<input type="text" id="d">
    Correta:<select id="correta"><option>A</option><option>B</option><option>C</option><option>D</option></select>
    <button class="salvar" onclick="salvarQuestao()">Salvar Questão</button>
</section>

<script>
let senha="1234";
let conteudos=JSON.parse(localStorage.getItem("conteudos"))||[];
let questoes=JSON.parse(localStorage.getItem("questoes"))||[];
let resultados=JSON.parse(localStorage.getItem("resultados"))||[];
let series=["6º Ano","7º Ano","8º Ano","9º Ano"];

function mostrar(id){
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 if(id==="conteudos") listarConteudos();
 if(id==="resultados") listarResultados();
}

function loginAdmin(){ if(senhaAdmin.value===senha){mostrar("admin")} else alert("Senha incorreta") }

series.forEach(s=>{
 serieQuestao.innerHTML+=`<option>${s}</option>`;
 serieConteudo.innerHTML+=`<option>${s}</option>`;
 serieAtividade.innerHTML+=`<option>${s}</option>`;
 serieSimulado.innerHTML+=`<option>${s}</option>`;
});

function salvarConteudo(){
 conteudos.push({serie:serieConteudo.value,titulo:tituloConteudo.value,texto:textoConteudo.value});
 localStorage.setItem("conteudos",JSON.stringify(conteudos));
 alert("Conteúdo salvo!");
}

function listarConteudos(){
 listaConteudos.innerHTML="";
 conteudos.filter(c=>c.serie===serieConteudoFiltro.value)
 .forEach(c=>listaConteudos.innerHTML+=`<div class='box'><h3>${c.titulo}</h3><p>${c.texto}</p></div>`);
}

function salvarQuestao(){
 questoes.push({serie:serieQuestao.value,pergunta:pergunta.value,img:imagem.value,a:a.value,b:b.value,c:c.value,d:d.value,correta:correta.value});
 localStorage.setItem("questoes",JSON.stringify(questoes));
 alert("Questão salva!");
}

function gerarQuestoes(area,serie,qtd){
 area.innerHTML="";
 let lista=questoes.filter(q=>q.serie===serie).slice(0,qtd);
 lista.forEach((q,i)=>{
 area.innerHTML+=`
 <div class='box'>
 <p><b>${i+1}. ${q.pergunta}</b></p>
 ${q.img?`<img src="${q.img}" class="questao-img">`:""}
 <label><input type='radio' name='q${i}' value='A'> ${q.a}</label><br>
 <label><input type='radio' name='q${i}' value='B'> ${q.b}</label><br>
 <label><input type='radio' name='q${i}' value='C'> ${q.c}</label><br>
 <label><input type='radio' name='q${i}' value='D'> ${q.d}</label>
 </div>`;
 });
}

serieAtividade.onchange=()=>gerarQuestoes(areaAtividade,serieAtividade.value,qtdAtividade.value);
serieSimulado.onchange=()=>gerarQuestoes(areaSimulado,serieSimulado.value,qtdSimulado.value);
qtdAtividade.onchange=()=>gerarQuestoes(areaAtividade,serieAtividade.value,qtdAtividade.value);
qtdSimulado.onchange=()=>gerarQuestoes(areaSimulado,serieSimulado.value,qtdSimulado.value);

function corrigirAtividade(){corrigir(areaAtividade,nomeAlunoAtiv.value,serieAtividade.value,"Atividade")}
function corrigirSimulado(){corrigir(areaSimulado,nomeAlunoSim.value,serieSimulado.value,"Simulado")}

function corrigir(area,nome,serie,tipo){
 let acertos=0;
 let radios=area.querySelectorAll("input[type=radio]:checked");
 radios.forEach((r,i)=>{ if(r.value===questoes.filter(q=>q.serie===serie)[i].correta) acertos++; });
 resultados.push({nome,serie,tipo,acertos});
 localStorage.setItem("resultados",JSON.stringify(resultados));
 alert("Resultado: "+acertos+" acertos");
}

function listarResultados(){
 listaResultados.innerHTML="";
 resultados.forEach(r=>listaResultados.innerHTML+=`<div class='box'>${r.nome} - ${r.tipo} - ${r.serie} → ${r.acertos} acertos</div>`);
}
</script>

</body>
</html>
